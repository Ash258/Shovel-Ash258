version: f42f45a7d219952ac07b6ed6ba5c4c107cf5aa2d
description: Automatic vscode server insiders installation. For vms preparation.
homepage: https://code.visualstudio.com/docs/remote/remote-overview
license: Proprietary
architecture:
  64bit:
    url: https://az764295.vo.msecnd.net/insider/f42f45a7d219952ac07b6ed6ba5c4c107cf5aa2d/vscode-server-win32-x64.zip
    hash: dfad2225cdece1e5fe4a471b1839ec85382aadfc598e02e37ebd204a4e72c07a
pre_install: |
  Rename-Item "$dir\$($fname -replace '\.zip')" $version
  $bin = Join-Path $env:USERPROFILE '.vscode-server-insiders\bin'
  Confirm-DirectoryExistence $bin | Out-Null
  if ($env:__VSS_Install -and $env:__VSS_Install -eq 1) {
      if (Join-Path $bin $version | Test-Path -PathType 'Container') {
          Write-UserMessage "Server with version '$version' already exists" -Warning
      } else {
          Write-UserMessage "Installing server to '$bin'" -Info
          Move-Item "$dir\$version" $bin
      }
  }
pre_uninstall: |
  if ($purge) {
      Write-UserMessage "Removing server installation from '$env:USERPROFILE\.vscode-server-insiders\bin\$version'" -Info
      Remove-Item "$env:USERPROFILE\.vscode-server-insiders\bin\$version" -Force -Recurse
  }
checkver:
  url: https://code.visualstudio.com/sha?build=insider
  jsonpath: $.products[0].version
autoupdate:
  architecture:
    64bit:
      url: https://az764295.vo.msecnd.net/insider/$version/vscode-server-win32-x64.zip
